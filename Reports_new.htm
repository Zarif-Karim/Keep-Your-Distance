<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Reports</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <link rel="stylesheet" type="text/css" href="stylereports.css">
    <style>
      #myProgress {
        width: 100%;
        background-color: #ddd;
      }
      
      #myBar {
        width: 1%;
        height: 30px;
        background-color: #4CAF50;
      }
      </style>
  </head>
  <body>
   
    <div class='logo'>
        <div class='inner_logo'>
            <div class='logo_container'>
             <h1><span>BLUEOASYS</span>COMPANY</span></h1>
            </div>
            <div class="topnav" id="myTopnav">
                    <a href="homePages.html">Home</a>
                    <a href="ImageProcessing.html">Image Processing</a>
                    <a href="#news">Video Processing</a>
                    <a href="#contact">Live Video</a>
                    <a href="Reports.html">Report</a>
                        <i class="fa fa-bars"></i>
                    </a>
                </div>
        </div>
    </div> 

    <p>This page contains useful information on the images and videos processed.</p>

    <h1>Information on Media processing</h1>
    <div id="myProgress">
      <div id="myBar"></div>
    </div>
    
    <form action="/action_page.php">
      <label for="images">Select an image/video to view information</label>
        <select name="images" id="images">
            <option value="Image_001.jpg">Image_001</option>
            <option value="Video_00.mp4">Video_001</option>
            <option value="Image_002.jpg">Image_002</option>
            <option value="Video_002.mp4">Video_002</option>
            <option value="Image_003.jpg">Image_003</option>
            <option value="Video_003.jpg">Video_003</option>
            
        </select>
        <br>
<button onclick="move()">Submit</button> 
<script>
  var i = 0;
  function move() {
    if (i == 0) {
      i = 1;
      var elem = document.getElementById("myBar");
      var width = 1;
      var id = setInterval(frame, 10);
      function frame() {
        if (width >= 100) {
          clearInterval(id);
          i = 0;
        } else {
          width++;
          elem.style.width = width + "%";
        }
      }
    }
  }
  </script>

      </form>
            
    <canvas id="myChart" width="400" height="200"></canvas>

    <script>

      window.addEventListener('load', setup);

      async function setup() {
        const ctx = document.getElementById('myChart').getContext('2d');
        const dataTemps = await getData();
        const myChart = new Chart(ctx, {
          type: 'line',
          data: {
            labels: dataTemps.years,
            datasets: [
              {
                label: 'Number of objects/second',
                data: dataTemps.temps,
                fill: false,
                borderColor: 'rgba(255, 99, 132, 1)',
                backgroundColor: 'rgba(255, 99, 132, 0.5)',
                borderWidth: 1
              },
              {
                label: 'Distance of objects',
                data: dataTemps.northern,
                fill: false,
                borderColor: 'rgba(99, 132, 255, 1)',
                backgroundColor: 'rgba(99, 132, 255, 0.5)',
                borderWidth: 1
              },
              {
                label: 'Number of objects',
                data: dataTemps.southern,
                fill: false,
                borderColor: 'rgba(99, 255, 132, 1)',
                backgroundColor: 'rgba(99, 255, 132, 0.5)',
                borderWidth: 1
              }
            ]
          },
          options: {}
        });
      }

      async function getData() {
       
        const response = await fetch('test.csv');
        const data = await response.text();
        const years = [];
        const temps = [];
        const northern = [];
        const southern = [];
        const rows = data.split('\n').slice(1);
        rows.forEach(row => {
          const cols = row.split(',');
          years.push(cols[0]);
          temps.push(14 + parseFloat(cols[1]));
          northern.push(14 + parseFloat(cols[2]));
          southern.push(14 + parseFloat(cols[3]));
        });
        return { years, temps, northern, southern };
      }
    </script>

    <h2>Overall information processed by the system</h2>
    
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['date', 'Images', 'Videos', 'objects detected'],
          ['02-04-2021',  100,      40, 15],
          ['03-04-2021',  117,      46, 20],
          ['04-04-2021',  66,       112, 26],
          ['05-04-2021',  103,      54, 13]
        ]);

        var options = {
          title: 'Processed Media',
          hAxis: {title: 'Date',  titleTextStyle: {color: '#333'}},
          vAxis: {title: 'Count', minValue: 0}
        };

        var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
        <div id="chart_div" style="width: 100%; height: 500px;"></div>
  </body>
</html>