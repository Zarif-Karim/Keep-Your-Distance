<!DOCTYPE html>
<html>
<title>Keep Your Distance Report</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" charset="utf-8"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">
<script src="https://d3js.org/d3.v5.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/p5@1.3.1/lib/p5.js"></script>
<script src="https://unpkg.com/ml5@0.6.1/dist/ml5.min.js" type="text/javascript"></script>
<script src = "https://cdn.jsdelivr.net/npm/chart.js@3.2.1/dist/chart.min.js"></script>
<script src="utils.js"></script>
<link rel="stylesheet" href="listbox.css">
<style>
html,body,h1,h2,h3,h4,h5 {font-family: "Raleway", sans-serif}
</style>
<body class="w3-light-grey" onload="setUserName();">

<!-- Top container -->
<div class="w3-bar w3-top w3-black w3-large" style="z-index:4">
  <button class="w3-bar-item w3-button w3-hide-large w3-hover-none w3-hover-text-light-grey" onclick="w3_open();"><i class="fa fa-bars"></i>Menu</button>
  <span class="w3-bar-item w3-right">Keep Your Distance</span>
</div>

<!-- Sidebar/menu -->
<nav class="w3-sidebar w3-collapse w3-white w3-animate-left" style="z-index:3;width:300px;" id="mySidebar"><br>
  <div class="w3-container w3-row">
    <div class="w3-col s4">
      <img src="icon.png" class="w3-circle w3-margin-right" style="width:46px">
    </div>
    <div class="w3-col s8 w3-bar">
      <span>Welcome, <strong id="show_uname"></strong></span><br>
      <a href="#" class="w3-bar-item w3-button"><i class="fa fa-envelope"></i></a>
      <a href="#" class="w3-bar-item w3-button"><i class="fa fa-user"></i></a>
    </div>
  </div>
  <hr>
  <div class="w3-container">
    <h5>Dashboard</h5>
  </div>
  <div class="w3-bar-block">
    <a href="#" class="w3-bar-item w3-button w3-padding-16 w3-hide-large w3-dark-grey w3-hover-black" onclick="w3_close()" title="close menu"><i class="fa fa-remove fa-fw"></i>  Close Menu</a>
    <a href="homePages.html" class="w3-bar-item w3-button w3-padding w3-blue"><i class="fa fa-users fa-fw"></i>  Overview</a>
    <a href="demo.html" class="w3-bar-item w3-button w3-padding"><i class="fa fa-eye fa-fw"></i>  System Demo</a>
    <a href="Report.html" class="w3-bar-item w3-button w3-padding"><i class="fa fa-history fa-fw"></i>  History</a>
  </div>
</nav>


<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- !PAGE CONTENT! -->
<div class="w3-main" style="margin-left:300px;margin-top:43px;">

  <!-- Header -->
  <header class="w3-container" style="padding-top:22px">
    <h5><b><i class="fa fa-dashboard"></i> My Dashboard</b></h5>
  </header>

  <div class="w3-row-padding w3-margin-bottom">
    <div class="w3-quarter">
      <div class="w3-container w3-red w3-padding-16">
        <div class="w3-left"><i class="fa fa-camera w3-xxxlarge"></i></div>
        <div class="w3-right">
          <h3>52</h3>
        </div>
        <div class="w3-clear"></div>
        <h4>Video</h4>
      </div>
    </div>
    <div class="w3-quarter">
      <div class="w3-container w3-blue w3-padding-16">
        <div class="w3-left"><i class="fa fa-eye w3-xxxlarge"></i></div>
        <div class="w3-right">
          <h3>99</h3>
        </div>
        <div class="w3-clear"></div>
        <h4>Views</h4>
      </div>
    </div>
    <div class="w3-quarter">
      <div class="w3-container w3-teal w3-padding-16">
        <div class="w3-left"><i class="fa fa-share-alt w3-xxxlarge"></i></div>
        <div class="w3-right">
          <h3>23</h3>
        </div>
        <div class="w3-clear"></div>
        <h4>Shares</h4>
      </div>
    </div>
    <div class="w3-quarter">
      <div class="w3-container w3-orange w3-text-white w3-padding-16">
        <div class="w3-left"><i class="fa fa-users w3-xxxlarge"></i></div>
        <div class="w3-right">
          <h3>50</h3>
        </div>
        <div class="w3-clear"></div>
        <h4>Users</h4>
      </div>
    </div>
  </div>

  <div class="w3-panel">
    <div class="w3-row-padding" style="margin:0 -16px">
      <div class="w3-third">
        <h5>Video</h5>
        <!-- <div id="canvas-container"></div> -->
        <div class="video">
                <video id="uploaded" controls height="300" width="400">
                </video>
        </div>
        </div>
        <div class="w3-twothird">
        <div id="ex" style="margin-left: 50px;">
          <p>Choose your previous video.</p>
          <div class="listbox-area">
            <div class="left-area">
              <span id="ss_elem">Video List:</span>
              <ul id="ss_elem_list" tabindex="0" role="listbox" aria-labelledby="ss_elem">
                <li id="ss_elem_Np" role="option">garden.mp4</li>
                <li id="ss_elem_Pu" role="option">video.mp4</li>
                <li id="ss_elem_Am" role="option">security.mp4</li>
                <li id="ss_elem_Cm" role="option">video1.mp4</li>
                <li id="ss_elem_Bk" role="option">video2.mp4</li>
                <li id="ss_elem_Cf" role="option">video3.mp4</li>
                <li id="ss_elem_Es" role="option">video4.mp4</li>
                <li id="ss_elem_Fm" role="option">video5.mp4</li>
                <li id="ss_elem_Md" role="option">video6.mp4</li>
                <li id="ss_elem_No" role="option">video7.mp4</li>
                <li id="ss_elem_No" role="option">video8.mp4</li>
              </ul>
            </div>
            <div class="button">
              <button id="start-btn" onClick="getVideo('video.mp4');">Play Video</button>
            </div>
            <div class="button">
              <button id="delete-btn" onClick="getVideo('video.mp4');">Delete Video</button>
            </div>
          </div>
        </div>
        </div>
        <hr>
          <div><canvas id = "chart" width="auto" height="100px" style="background-color: white; margin-top: 10px;"></canvas></div>
        </div>
      <div class="w3-twothird">
        <h5>Feeds</h5>
        <div><canvas id = "chart" width="auto" height="100px"></canvas></div>
        <table class="w3-table w3-striped w3-white">
          <tr>
            <td><i class="fa fa-user w3-text-blue w3-large"></i></td>
            <td>New record, over 90 views.</td>
            <td><i>10 mins</i></td>
          </tr>
          <tr>
            <td><i class="fa fa-bell w3-text-red w3-large"></i></td>
            <td>Database error.</td>
            <td><i>15 mins</i></td>
          </tr>
          <tr>
            <td><i class="fa fa-users w3-text-yellow w3-large"></i></td>
            <td>New record, over 40 users.</td>
            <td><i>17 mins</i></td>
          </tr>
          <tr>
            <td><i class="fa fa-comment w3-text-red w3-large"></i></td>
            <td>New comments.</td>
            <td><i>25 mins</i></td>
          </tr>
          <tr>
            <td><i class="fa fa-bookmark w3-text-blue w3-large"></i></td>
            <td>Check transactions.</td>
            <td><i>28 mins</i></td>
          </tr>
          <tr>
            <td><i class="fa fa-laptop w3-text-red w3-large"></i></td>
            <td>CPU overload.</td>
            <td><i>35 mins</i></td>
          </tr>
          <tr>
            <td><i class="fa fa-share-alt w3-text-green w3-large"></i></td>
            <td>New shares.</td>
            <td><i>39 mins</i></td>
          </tr>
        </table>
      </div>
    </div>
     <footer class="w3-container w3-padding-10 w3-light-grey">
      <p style="background-color: white; text-align: center;">Thank you to vist our system</p>
      </footer>

  <hr>
 
                              <!-- nav function--->
<script type="text/javascript">
  $(".menu-toggle-btn").click(function(){
    $(this).toggleClass("fa-times");
    $(".navigation-menu").toggleClass("active");
  });
</script>
<!---graph 1---->
 <script>
  const xlabels = [];
  const yDist = [];
  chartIt();
  async function chartIt() {
    await getData();
  const ctx = document.getElementById('chart').getContext('2d');
  const myChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: xlabels,
      datasets: [
      {
        label: 'Distance(m) in the cumulative time(s)',
        data: yDist,
        backgroundColor: "rgba(120, 190, 132, 1)",
        borderColor: "rgba(120, 190, 132, 1)",
        borderCapStyle:'butt',
        borderDash:[],
        borderDashOffset: 0.0,
        borderJoinStyle:'miter',
        pointBorderColor: "rgba(120, 190, 132, 1)",
        pointBackgroundColor: "rgba(120, 190, 132, 1)",
        pointBorderWidth:0.1,
        pointRadius: 0,
        pointHoverRadius:5,
        pointHoverBackgroundColor: "rgbd(50,50,50,1)",
        pointHoverBorderColor: "rgbd(50,50,50,1)",
        pointHoverBorderWidth:2,
        pointHitRadius:10,
        lineTension: 0.4,
      }]
    },
    options: {
          responsive: true,
          plugins: {
            title: {
              display: true,
              text: "Graph with distance(m) in the cumulative time(s)"
            }
          },
        scales: {
          //x axis detail
              x: {
                display: true,
                title: {
                  display: true,
                  text: "Cumulative time (s)",
                }
              },
            //y axis detail
              y:{
                display: true,
                  title: {
                    display: true,
                    text:"Distance (m)",
                },
                ticks: {
                  min:0,
                  // Include a dollar sign in the ticks
                  callback: function(value, index, values) {
                    return value;
                  }
                  },
                  // grid: {
                  //   display: false
                  // }
              }
        }
        },

  });
  }

    getData();

    async function getData(){
      const response = await fetch('live-camera.csv');
      const data = await response.text();


      const table = data.split('\n').slice(1);
      table.forEach(row =>
      {
        const columns = row.split(',');
        const Cultime = columns[2];
        xlabels.push(Cultime);
        const distance = columns[4];
         yDist.push(parseFloat(distance));
        console.log(Cultime, distance);
      });

      }
  </script>

  <!-- Footer -->
 
  <!-- End page content -->
</div>

<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
  if (mySidebar.style.display === 'block') {
    mySidebar.style.display = 'none';
    overlayBg.style.display = "none";
  } else {
    mySidebar.style.display = 'block';
    overlayBg.style.display = "block";
  }
}

// Close the sidebar with the close button
function w3_close() {
  mySidebar.style.display = "none";
  overlayBg.style.display = "none";
}
</script>

</body>
</html>
