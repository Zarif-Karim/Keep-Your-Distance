<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Live Camera</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content = "ie=edge"/>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" charset="utf-8"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.3.1/lib/p5.js"></script>
    <script src="https://unpkg.com/ml5@0.6.1/dist/ml5.min.js" type="text/javascript"></script>
    <script src = "https://cdn.jsdelivr.net/npm/chart.js@3.2.1/dist/chart.min.js"></script>
    <script src="sketch.js"></script>
    <style>
      h1{
        text-align: absolute;
        font-family: "Times New Roman",sans-serif;

      }
      .vidElement{
        border: pink;
        margin-left: 10px:
      }
      </style>
  </head>
   <header>
      <div class="twp-video-layer"></div>
    </div>
    <div class="inner-width">
      <a href="homePages.html" class="logo"><img src="logo.png" alt=""></a>
      <i class="menu-toggle-btn fas fa-bars"></i>
     <nav class="navigation-menu">
      <a href="homePages.html"><i class="fas fa-home home"></i>HOME</a>
      <a href="Live.html"><i class="fas fa-users live"></i>SYSTEM DEMO</a>
      <a href="Report.html"><i class="fas fa-headset report"></i>REPORT</a>
     </nav>
    </div>
  </header>

    <!-- live camera page--->
                  <h1> Database report</h1>

                  <div class= "drop-down">
                  <label for="images">Select two object to view distance between objects</label>
                    <select name="images" id="images">
                        <option value="#">Object 0</option>
                        <option value="#">Object 1</option>
                        <option value="#">Object 2</option>
                        <option value="#">Object 3</option>
                        <option value="#">Object 4</option>
                        <option value="#">Object 5</option>
                    </select>
                     <select name="images" id="images">
                      <option value="#">Object 0</option>
                      <option value="#"> Object 1</option>
                      <option value="#">Object 2</option>
                      <option value="#">Object 3</option>
                      <option value="#">Object 4</option>
                      <option value="#">Object 5</option>
                    </select>
                    <br>
            <button id="submit-report">Submit</button>
            </div>
                      <!--check box code--->
                    <div id="box3">
                      <div id="box4">
                        <div class="live-camera" style="margin-left: auto; margin-right: auto;">
                        <div id="canvas-container" style="width=640; height=480; margin-right: 0px; margin-left: 50px;"></div>
                        <div class="button">
                          <button id="start-btn">Play Video</button>
                        </div>
                        </div>
                      </div>
                     <div id="box8">
                    <div><canvas id = "chart" width="auto" height="100px"></canvas></div>
                      </div>
                      <!-- nav function--->
    <script type="text/javascript">
      $(".menu-toggle-btn").click(function(){
        $(this).toggleClass("fa-times");
        $(".navigation-menu").toggleClass("active");
      });
    </script>
    <!---graph 1---->
     <script>
      const xlabels = [];
      const yDist = [];
      chartIt();
      async function chartIt() {
        await getData();
      const ctx = document.getElementById('chart').getContext('2d');
      const myChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: xlabels,
          datasets: [
          {
            label: 'Distance(m) in the cumulative time(s)',
            data: yDist,
            backgroundColor: "rgba(120, 190, 132, 1)",
            borderColor: "rgba(120, 190, 132, 1)",
            borderCapStyle:'butt',
            borderDash:[],
            borderDashOffset: 0.0,
            borderJoinStyle:'miter',
            pointBorderColor: "rgba(120, 190, 132, 1)",
            pointBackgroundColor: "rgba(120, 190, 132, 1)",
            pointBorderWidth:0.1,
            pointRadius: 0,
            pointHoverRadius:5,
            pointHoverBackgroundColor: "rgbd(50,50,50,1)",
            pointHoverBorderColor: "rgbd(50,50,50,1)",
            pointHoverBorderWidth:2,
            pointHitRadius:10,
            lineTension: 0.4,
          }]
        },
        options: {
              responsive: true,
              plugins: {
                title: {
                  display: true,
                  text: "Graph with distance(m) in the cumulative time(s)"
                }
              },
            scales: {
              //x axis detail
                  x: {
                    display: true,
                    title: {
                      display: true,
                      text: "Cumulative time (s)",
                    }
                  },
                //y axis detail
                  y:{
                    display: true,
                      title: {
                        display: true,
                        text:"Distance (m)",
                    },
                    ticks: {
                      min:0,
                      // Include a dollar sign in the ticks
                      callback: function(value, index, values) {
                        return value;
                      }
                      },
                      // grid: {
                      //   display: false
                      // }
                  }
            }
            },

      });
      }

        getData();

        async function getData(){
          const response = await fetch('live-camera.csv');
          const data = await response.text();


          const table = data.split('\n').slice(1);
          table.forEach(row =>
          {
            const columns = row.split(',');
            const Cultime = columns[2];
            xlabels.push(Cultime);
            const distance = columns[4];
             yDist.push(parseFloat(distance));
            console.log(Cultime, distance);
          });

          }
      </script>
      </body>
</html>
